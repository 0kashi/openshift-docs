// Module included in the following assemblies:
//
// * upgrading/upgrading-aws.adoc

[id='upgrade-cluster-version-parameters-{context}']
= ClusterVersion paramaters

The Cluster Version Operator (CVO) uses the following parameters to manage
cluster versions and upgrades.

.ClusterVersion parameters

[cols="2,8a",options="header"]
|===
|Parameter |Description

|`ClusterVersionSpec`
|The specification that describes the cluster version state that you want. The
CVO updates your cluster components to the specified versions.

|`ClusterVersionSpec.clusterID`
|Required. The unique RFC4122 UUID value that identifies your cluster.
`xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx` hexadecimal value

|`ClusterVersionSpec.desiredUpdate`
|Optional. The cluster version that you want. If the current and intended
version do not match, an upgrade starts. Set only a version from the list of
recommended updates or your upgrade might fail.
If an update exists with a version in the `availableUpdates` or history,
you can specify the version field without specifying the image.

If an upgrade fails, the Operator stops and reports the status of the failing
component. Setting the `desiredUpdate` value to the previous version starts a
rollback, but not all rollbacks succeed.

|`ClusterVersionSpec.upstream`
|Optional. Specify the preferred update server. If you do not specify a value,
the CVO uses the best update server for the cluster and region.

|`ClusterVersionSpec.channel`
|Optional. Specify the channel to use to apply non-standard updates to the
cluster.

[IMPORTANT]
====
The default channel contains stable updates. Do not specify a
`ClusterVersionSpec.channel` value on production clusters.
====

|`ClusterVersionSpec.overrides`
|Optional. A list of overides for components that the CVO manages. Mark
components as `unmanaged` to prevent the CVO from creating or updating the object.

|`ClusterVersionStatus`
|The status of available updates and any in-progress updates. The current field
is set to the version that the cluster is reconciling to, and the conditions
array reports whether the update succeeded, is in progress, or is failing.

|`ClusterVersionStatus.desired`
|The version that the cluster is reconciling towards. In clusters that have not
fully initialized, this value displays the available image or tag version data.

|`ClusterVersionStatus.history`
|A list of the most recent versions applied to the cluster. This value might be
empty during cluster initialization and is updated when a new update is applied.
The list is ordered by date, where the newest update is first in the list.
Updates in the history have state `Completed` if the rollout completed and
`Partial` if the update failed or did not complete.

|`ClusterVersionStatus.observedGeneration`
|The version of the spec that is synchronized. If this value is not equal to
the `metadata.generation` value, then the `desired` and `conditions` values
represent a previous cluster version.

|`ClusterVersionStatus.versionHash`
|A representation of the content that the cluster uses during upgrade.
You cannot set this parameter value.

|`ClusterVersionStatus.conditions`
|The condition of the CVO. Conditions are valid for the current `desiredUpdate`
only when the `metadata.generation` value matches the
`status.generation` value.

* `Available` means that the upgrade to the `desiredUpdate` value completed.
* `Progressing` means that an upgrade is in progress.
* `Failing` means that an update is blocked by a temporary or permanent error.

|`ClusterVersionStatus.availableUpdates`
|The list of appropriate updates for the cluster. This list is empty if no
updates are recommended, the update service is unavailable, or you specified
an invalid channel.

|`UpdateState`
|Whether or not cluster updates succeeded.

* `CompletedUpdate` means that an update succeeded.
* `PartialUpdate` means that an update is in progress or did not finish.

|`UpdateHistory`
|A single attempted update to the cluster.

|`UpdateHistory.state`
|Whether the update completed.

* `Partial` means that the update did not finish.
* `Completed` means that the update succeeded.

|`UpdateHistory.startedTime`
|The time that the update started.

|`UpdateHistory.completionTime`
|The time that the update completed. For in process updates, this value is null.

|`UpdateHistory.version`
|Optional. A semantic version that identifies the update version. If the
requested image does not define a version or if a failure occurs retrieving the
image, this value might be empty.

|`UpdateHistory.image`
|The generated container image location that contains the update.

|`ComponentOverride`
|You can override the CVO's behavior for a component.

|`ComponentOverride.kind`
|The object to override

|`ComponentOverride.group`
|The API group for the specified `kind`.

|`ComponentOverride.namespace`
|The component's namespace. If the resource is cluster scoped, this value is
empty.

|`ComponentOverride.name`
|The component to override.

|`ComponentOverride.unmanaged`
|A boolean that defines whether the CVO stops managing the resources in the
cluster. The default value is `false`.

|`URL`
|A thin wrapper around the URL string that ensures the string is a valid URL.

|`Update`
|Represents a release of the CVO that is referenced by the `image` member.

|`Update.version`
|A semantic version that identifies the update version. If you specify the
`image`, the `version` is optional.

|`Update.image`
|The container image location that contains the update. If you specify a
`version` that is listed in the `availableUpdates` value, the `image` value is
optional.

|`RetrievedUpdates`
|Reports whether available updates were retrieved from the upstream update
server.

* `Unknown` means that the updates have not been retrieved.
* `False` means that the updates cannot be retrieved.
* `True` means that the list of `availableUpdates` is accurate.

|`ClusterVersionList`
|A list of ClusterVersion resources.

|===