// Module included in the following assemblies:
//
// * logging/efk-logging-elasticsearch.adoc

[id='efk-logging-elasticsearch-add-remove_{context}']
= Scaling your Elasticsearch cluster

You can scale the number of data nodes in Elasticsearch.

For example, if you want to increase redundancy, and use the `FullRedundancy` or `MultipleRedundancy` policy, you can scale up the cluster to increase the number of shard replicas in your cluster.  

.Prerequisite

Set cluster logging to the unmanaged state.

.Procedure

. To scale up the cluster, create a Cluster Logging Custom Resource (CR) to add a number of nodes of a specific type:
+
[source,yaml]
----
apiVersion: "logging.openshift.io/v1alpha1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"
...
nodes:
  - nodeCount: 2 <1>
    nodeSpec:
      resources: {}
    roles: 
    - data <2>
----
<1> Specify the number of nodes of this type.
<2> Specify the `data` role.
+
For example, to add an additional node:
+
[source,yaml]
----
nodes:
  - nodeCount: 2
    nodeSpec:
      resources: {}
    storage: {}
    roles: 
    - data 
----

. To scale down, create a Cluster Logging Custom Resource (CR) to reduce the number of nodes of a specific type:
+
[source,yaml]
----
apiVersion: "logging.openshift.io/v1alpha1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"
...
nodes:
  - nodeCount: 1 <1>
    nodeSpec:
      resources: {}
    roles: 
    - data 
----
<1> Specify the number of nodes you want in your cluster.
<2> Specify the `data` role.

