// Module included in the following assemblies:
//
// networking/network-optimization.adoc

[id="optimizing-the-mtu-for-your-network-{context}"]
= Optimizing the MTU for your network

There are two important maximum transmission units (MTUs): the network
interface card (NIC) MTU and the SDN overlay's MTU.

MTUs are now autodetected, so you do not need to adjust MTU settings. When the
Cluster Network Operator runs, it determines the MTU used by the default route,
then sets the MTU accordingly. If you want to have a fixed MTU size for your
workloads, then you must set the MTU explicitly, then set the network
configuration before installation.

.Procedure

To set the MTU explicitly, complete the following.

. Run:
+
----
$ openshift-installer create install-config
----

. Run the following to generate the required manifests:
+
----
$ openshift-installer create manifests
----

. Edit the `manifests/cluster-network-02-config.yml` file.

. Run the following to use the manifests to create a cluster:
+
----
$ openshift-installer create cluster
----

. The following is the default state of the `cluster-network-02-config.yaml` file.
Adjust the settings as necessary:
+
----
apiVersion: networkoperator.openshift.io/v1
kind: NetworkConfig
metadata:
  creationTimestamp: null
  name: default
spec:
  additionalNetworks: null
  clusterNetworks:
  - cidr: 10.128.0.0/14
    hostSubnetLength: 9
  defaultNetwork:
    openshiftSDNConfig:
      mode: Networkpolicy <1>
    otherConfig: null
    type: OpenshiftSDN
  serviceNetwork: 172.30.0.0/16
status: {}
----
+
<1> `Networkpolicy` is the default.
+
You can also set the `Multitenant` or `Subnet`, `vxlanPort`, and  `mtu`:
+
----
spec:
  defaultNetwork:
    type: OpenShiftSDN
    openshiftSDNConfig:
      mode: NetworkPolicy
      vxlanPort: 4789
      mtu: 1450
      useExternalOpenvswitch: false
----
