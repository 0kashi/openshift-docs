:context: efk-logging-configuring
[id="efk-logging-configuring"]
= Configuring cluster logging
include::modules/common-attributes.adoc[]

toc::[]

Cluster logging is configurable using a Cluster Logging Custom Resource (CR) deployed
in the `openshift-logging` project.

The Cluster Logging Operator watches for changes to Cluster Logging CRs,
creates any missing logging components, and adjusts the logging deployment accordingly.

The Cluster Logging CR is based on the Cluster Logging Custom Resource Definition (CRD), which defines a complete cluster logging deployment
and includes all the components of the logging stack to collect, store and visualize logs.

.Sample Cluster Logging Custom Resource (CR)
[source,yaml]
----
apiVersion: logging.openshift.io/v1
kind: ClusterLogging
metadata:
  name: "instance"
spec:
  managementState: "Managed"
  logStore:
    type: "elasticsearch"
    elasticsearch:
      nodeCount: 3
      storage: {}
      redundancyPolicy: "SingleRedundancy"
  visualization:
    type: "kibana"
    kibana:
      replicas: 1
  curation:
    type: "curator"
    curator:
      schedule: "30 3 * * *"
  collection:
    logs:
      type: "fluentd"
      fluentd: {}
----

You can configure the following for cluster logging:

* You can place cluster logging into an unmanaged state that allows an administrator to assume full control of individual
component configurations and upgrades.

* You can overwrite the image for each cluster logging component by modifying the appropriate
environment variable in the `cluster-logging-operator` Deployment.

* You can specify specific nodes for the logging components using node selectors.

////
4.1
* You can specify the Log collectors to deploy to each node in a cluster, either Fluentd or Rsyslog.

[IMPORTANT]
====
The Rsyslog log collector is currently a Technology Preview feature.
====
////

// The following include statements pull in the module files that comprise
// the assembly. Include any combination of concept, procedure, or reference
// modules required to cover the user story. You can also include other
// assemblies.

include::modules/efk-logging-management-state-changing.adoc[leveloffset=+1]

include::modules/efk-logging-configuring-image-about.adoc[leveloffset=+1]

include::modules/efk-logging-configuring-node-selector.adoc[leveloffset=+1]
