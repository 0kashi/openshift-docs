// Module included in the following assemblies:
//
// * authentication/identity_providers/configuring-basic-authentication-identity-provider.adoc

[id='identity-provider-configuring-basic-authentication-{context}']
= Configuring basic authentication

You might need to take more steps to prepare your cluster for basic authentication.

. If you have:
+
- Already completed the installation of Openshift, then copy the
*_/etc/origin/master/master-config.yaml_* file into a new directory; for example:
+
----
$ mkdir basicauthconfig; cp master-config.yaml basicauthconfig
----
+
- Not yet installed {product-title}, then start the {product-title} API server,
specifying the hostname of the (future) {product-title} master and a directory
to store the configuration file created by the start command:
+
----
$ openshift start master --public-master=<apiserver> --write-config=<directory>
----
+
For example:
+
----
$ openshift start master --public-master=https://myapiserver.com:8443 --write-config=basicauthconfig
----
+
[NOTE]
====
If you are installing with Ansible, then you must add the
`identityProvider` configuration to the Ansible playbook.
If you use the following steps to modify your configuration manually after installing with Ansible, then you will lose any modifications whenever you re-run the install tool or upgrade.
====
+
. Edit the new *_master-config.yaml_* file's `identityProviders` stanza, and
copy the 
example `BasicAuthPasswordIdentityProvider` configuration and paste it to
replace the existing stanza:

. Make the following modifications to the `identityProviders` stanza:
.. Set the provider `name` to something unique and relevant to your
deployment. This name is prefixed to the returned user ID to form an identity
name.
.. If required, set `mappingMethod` to control how mappings are established between the
provider's identities and user objects.
.. Specify the HTTPS `url` to use to connect to a server that accepts credentials in Basic authentication headers.
.. Optionally, set the `ca` to the certificate bundle to use in order to validate server certificates for the configured URL, or leave it empty to use the system-trusted roots.
.. Optionally, remove or set the `certFile` to the client certificate to present when making requests to the configured URL.
.. If `certFile` is specified, then you must set the `keyFile` to the key for the client certificate.
. Save your changes and close the file.
. Start the {product-title} API server, specifying the configuration file you just
modified:
+
----
$ openshift start master --config=<path/to/modified/config>/master-config.yaml
----

Once configured, any user logging in to the {product-title} web console will be
prompted to log in using their Basic authentication credentials.
