// Module included in the following assemblies:
//
// * nodes/nodes-scheduler-descheduler.adoc

[id='nodes-scheduler-descheduler-create-policy_{context}']
= Creating a policy for descheduling pods in {product-title} 

You can configure the descheduler to remove pods from nodes that violate rules defined by _strategies_ in a YAML policy file. 

.Procedure

To create the needed policy:

. Create a YAML file similar to the following:
+
.Sample descheduler policy file
[source,yaml]
----
apiVersion: "descheduler/v1alpha1"
kind: "DeschedulerPolicy"
strategies:
  "RemoveDuplicates": <1>
     enabled: false
  "LowNodeUtilization": <2>
     enabled: true
     params:
       nodeResourceUtilizationThresholds: 
         thresholds:  <3>
           "cpu" : 20
           "memory": 20
           "pods": 20
         targetThresholds:  <4>
           "cpu" : 50
           "memory": 50
           "pods": 50
         numberOfNodes: 3
  "RemovePodsViolatingInterPodAntiAffinity": <5>
     enabled: true
----

<1> Creates a policy to remove duplicate pods. Set this value to `enabled: true` to use this policy. Set to `false` to disable this policy.
<2> Creates a policy to move pods to underutilized nodes. 
<3> Set the low-end threshold. If the node is below all three values, the descheduler considers the node underutilized.
<4> Set the high-end threshold. If the node is below these values and above the `threshold` values, the descheduler considers the node properly utilized. Pods on nodes between `thresholds` and `targetThresholds` is not considered for eviction.
<5> Creates a policy to remove pods that violate anti-affinity rules. Set this value to `enabled: true` to use this policy. Set to `false` to disable this policy.

. Create the descheduler object:
+
----
oc create -f <file-name>.yaml
----

You can configure and disable parameters associated with strategies as needed.

