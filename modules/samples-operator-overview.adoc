// Module included in the following assemblies:
//
// * assembly/openshift_images
// * openshift_images/configuring_samples_operator.adoc


[id="samples-operator-overview_{context}"]
= Understanding the Samples Operator

On initial startup, the operator creates the default configuration object for
itself and then creates the sample imagestreams and templates. The imagestreams
are RHEL {product-title} based and point to images on registry.redhat.io. The
templates are those categorized as {product-title} Templates. It also copies the
pull secret captured by the installation into the OpenShift namespace with the
name `samples-registry-credentials` to facilitate imagestream imports. A cluster
administrator can create any additional secrets containing the content of a
Docker `config.json` in the OpenShift namespace as needed to facilitate image
import.

The Samples Operator configuration is a cluster-wide resource, and the deployment
is contained within the `openshift-cluster-samples-operator` namespace.

The image for the Samples Operator contains imagestream and template definitions
for the associated OpenShift release. When each sample is created or updated,
the Samples Operator includes an annotation that denotes the version of
{product-title}. The operator uses this annotation to ensure that each sample
matches the release version. Samples outside of its inventory are ignored, as
are skipped samples. Modifications to any samples that are managed by the
operator, where that version annotation is modified or deleted, will be reverted
automatically. The Jenkins images are actually part of the image payload from
installation and are tagged into the imagestreams directly.

The Samples Operator configuration resource includes a finalizer which cleans up
the following upon deletion:

* Operator managed imagestreams.
* Operator managed templates.
* Operator generated configuration resources.
* Cluster status resources.
//* The `samples-registry-credentials` secret.

Upon deletion of the samples resource, the Samples Operator recreates the
resource using the default configuration.
