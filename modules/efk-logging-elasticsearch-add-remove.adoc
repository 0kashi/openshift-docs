// Module included in the following assemblies:
//
// * logging/efk-logging-elasticsearch.adoc

[id="efk-logging-elasticsearch-add-remove-{context}"]
= Scaling your Elasticsearch cluster

You can scale the number of data nodes in Elasticsearch.

For example, if you want to increase redundancy, and use the `FullRedundancy` or `MultipleRedundancy` policy, you can scale up the cluster to increase the number of shard replicas in your cluster.  

.Prerequisite

* Cluster logging and Elasticsearch must be installed.

* Set cluster logging to the unmanaged state.

* If needed, get the name of the Cluster Logging Custom Resource from the `openshift-logging` project:
+
----
$ oc get ClusterLogging
NAME       AGE
instance   112m
----

.Procedure

. To scale up the cluster, edit the Cluster Logging Custom Resource (CR) to add a number of nodes of a specific type:
+
[source,yaml]
----
apiVersion: "logging.openshift.io/v1alpha1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"
...
nodes:
  - nodeCount: 2 <1>
    nodeSpec:
      resources: {}
----
<1> Specify the number of nodes of this type.
+
For example, to scale up your cluster:
+
[source,yaml]
----
nodes:
  - nodeCount: 2
    nodeSpec:
      resources: {}
    storage: {}
----

. To scale down, create a Cluster Logging Custom Resource (CR) to reduce the number of nodes of a specific type:
+
[source,yaml]
----
apiVersion: "logging.openshift.io/v1alpha1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"
...
nodes:
  - nodeCount: 1 <1>
    nodeSpec:
      resources: {}
----
<1> Specify the number of nodes you want in your cluster.
