// Module included in the following assemblies:
//
// * authentication/identity_providers/configuring-github-identity-provider.adoc

[id='identity-provider-github-CRD-{context}']
= Sample GitHub CRD

The following Custom Resource Definition (CRD) shows the parameters and acceptable values for a
GitHub identity provider.

.GitHub CRD

[source,yaml]
----
apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster
spec:
  identityProviders:
  - name: githubidp <1>
    challenge: false <2>
    login: true <3>
    mappingMethod: claim <4>
    type: GitHub
    github:
      ca: ... <5>
      clientID: {...} <6> 
      clientSecret: <7>
        name: github-secret
      hostname: ... <8>
      organizations: <9>
      - myorganization1
      - myorganization2
      teams: <10>
      - myorganization1/team-a
      - myorganization2/team-b
----
<1> This provider name is prefixed to the GitHub numeric user ID to form an
identity name. It is also used to build the callback URL.
<2> `GitHubIdentityProvider` cannot be used to send `WWW-Authenticate`
challenges.
<3> When `true`, unauthenticated token requests from web clients, like the web
console, are redirected to GitHub to log in.
<4> Controls how mappings are established between this provider's identities and user objects.
<5> For GitHub Enterprise, the CA is the optional trusted certificate authority
bundle to use when making requests to the server. Omit this parameter to use the
default system root certificates. For GitHub, omit this parameter.
<6> The client ID of a
link:https://github.com/settings/applications/new[registered GitHub OAuth
application]. The application must be configured with a callback URL of
`<master>/oauth2callback/<identityProviderName>`.
<7> Reference to an {product-title} Secret containing the client secret
issued by GitHub.
<8> For GitHub Enterprise, you must provide the host name of your instance, such as
`example.com`. This value must match the GitHub Enterprise `hostname` value in
in the *_/setup/settings_* file and cannot include a port number. For GitHub,
omit this parameter.
<9> Optional list of organizations. If specified, only GitHub users that are members of
at least one of the listed organizations will be allowed to log in. If the GitHub OAuth
application configured in `clientID` is not owned by the organization, an organization
owner must grant third-party access in order to use this option. This can be done during
the first GitHub login by the organization's administrator, or from the GitHub organization settings.
Cannot be used in combination with the `teams` field.
<10> Optional list of teams. If specified, only GitHub users that are members of
at least one of the listed teams will be allowed to log in. If the GitHub OAuth
application configured in `clientID` is not owned by the team's organization, an organization
owner must grant third-party access in order to use this option. This can be done during
the first GitHub login by the organization's administrator, or from the GitHub organization settings.
Cannot be used in combination with the `organizations` field.
