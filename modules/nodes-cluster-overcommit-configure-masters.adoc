// Module included in the following assemblies:
//
// * nodes/nodes-cluster-overcommit.adoc

[id='nodes-cluster-overcommit-configure-masters_{context}']
= Configuring masters for overcommitment

{product-title} administrators control overcommit by configuring masters
to override the ratio between request and limit set on developer
containers. 

.Prerequisites

Because these overrides have no effect if no limits have
been set on containers, you must create a *LimitRange*
object with default limits, per individual project or in the
project template, in order to ensure that the overrides apply.


.Procedure

To configure a master for overcommit:

. Configuring the `*ClusterResourceOverride*` admission controller in the
*_master-config.yaml_* as in the following example (reuse the existing configuration tree
if it exists, or introduce absent elements as needed):
+
[source,yaml]
----
  admissionConfig:
    pluginConfig:
      ClusterResourceOverride: <1>
        configuration:
          apiVersion: v1
          kind: ClusterResourceOverrideConfig
          memoryRequestToLimitPercent: 25 <2>
          cpuRequestToLimitPercent: 25 <3>
          limitCPUToMemoryPercent: 200 <4>
----
<1> This is the plug-in name; case matters and anything but an exact match for a plug-in name is ignored.
<2> (optional, 1-100) If a container memory limit has been specified or defaulted, the memory request is overridden to this percentage of the limit.
<3> (optional, 1-100) If a container CPU limit has been specified or defaulted, the CPU request is overridden to this percentage of the limit.
<4> (optional, positive integer) If a container memory limit has been specified or defaulted, the CPU limit is overridden to a percentage of the memory limit, with a 100 percentage scaling 1Gi of RAM to equal 1 CPU core. This is processed prior to overriding CPU request (if configured).

. Restart the master service:
+
[source,bash]
----
# master-restart api
# master-restart controllers
----

