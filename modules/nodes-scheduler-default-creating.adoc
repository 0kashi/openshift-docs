// Module included in the following assemblies:
//
// * nodes/nodes-scheduler-default.adoc

[id='nodes-scheduler-default-creating_{context}']
= Creating a scheduler policy file

//Made changes to this file to match https://github.com/openshift/openshift-docs/pull/13626/files#diff-ba6ab177a3e2867eaefe07f48bd6e158

You can control change the default scheduling behavior using a ConfigMap in the `openshift-config` project.
Add and remove predicates and priorities to the ConfigMap to create a _scheduler policy_.

.Procedure

To create the scheduler policy:

. Create the a JSON file with the desired predicates and priorities. 
+
.Sample scheduler JSON file
[source,json]
----
{
"kind" : "Policy",
"apiVersion" : "v1",
"predicates" : [      <1>
	{"name" : "PodFitsHostPorts"},
	{"name" : "PodFitsResources"},
	{"name" : "NoDiskConflict"},
	{"name" : "NoVolumeZoneConflict"},
	{"name" : "MatchNodeSelector"},
	{"name" : "HostName"}
	],
"priorities" : [     <2>
	{"name" : "LeastRequestedPriority", "weight" : 1},
	{"name" : "BalancedResourceAllocation", "weight" : 1},
	{"name" : "ServiceSpreadingPriority", "weight" : 1},
	{"name" : "EqualPriority", "weight" : 1}
	]
}
----
<1> Add the predicates as needed.
<2> Add the priorities as needed.

. Create a ConfigMap based on the JSON file:
+
----
$ oc create configmap -n openshift-config --from-file=policy.cfg scheduler-policy

configmap/scheduler-policy created
----

. Edit the *_scheduler.yaml_* file, installed by default, to add the ConfigMap.
+
----
apiVersion: config.openshift.io/v1
kind: Scheduler
metadata:
  name: cluster
spec: {}
  policy:
    name: mypolicy
----

. Create the `scheduler` object:
+
----
$ oc create -f scheduler.yaml
----
