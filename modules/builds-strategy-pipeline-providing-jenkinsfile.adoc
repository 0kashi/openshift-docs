// Module included in the following assemblies:
//* assembly/builds

[id='builds-strategy-pipeline-providing-jenkinsfile-{context}']
= Providing the Jenkinsfile for pipeline builds

You can provide the Jenkinsfile for pipeline builds.

.Procedure

To provide the Jenkinsfile, you can either:

1. Embed the Jenkinsfile in the build configuration.
2. Include in the build configuration a reference to the
   Git repository that contains the Jenkinsfile.

.Embedded Definition
[source,yaml]
----
kind: "BuildConfig"
apiVersion: "v1"
metadata:
  name: "sample-pipeline"
spec:
  strategy:
    jenkinsPipelineStrategy:
      jenkinsfile: |-
        node('agent') {
          stage 'build'
          openshiftBuild(buildConfig: 'ruby-sample-build', showBuildLogs: 'true')
          stage 'deploy'
          openshiftDeploy(deploymentConfig: 'frontend')
        }
----

.Reference to Git Repository
[source,yaml]
----
kind: "BuildConfig"
apiVersion: "v1"
metadata:
  name: "sample-pipeline"
spec:
  source:
    git:
      uri: "https://github.com/openshift/ruby-hello-world"
  strategy:
    jenkinsPipelineStrategy:
      jenkinsfilePath: some/repo/dir/filename <1>
----
<1> The optional `jenkinsfilePath` field specifies the name of the
    file to use, relative to the source `contextDir`.
    If `contextDir` is omitted, it defaults to the root of the repository.
    If `jenkinsfilePath` is omitted, it defaults to *_Jenkinsfile_*.
