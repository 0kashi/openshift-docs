// Module included in the following assemblies:
//
// * authentication/understanding-authentication.adoc

[id='authentication-overview-{context}']
= Authentication overview

For users to interact with {product-title}, they must first authenticate
to the cluster. The authentication layer identifies the user associated with requests to the
{product-title} API. The authorization layer then uses information about the
requesting user to determine if the request should be allowed.

ifdef::openshift-enterprise,openshift-origin[]
As an administrator, you can configure authentication for {product-title}.
endif::[]

[id='users-and-groups-{context}']
== Users and groups

A _user_ in {product-title} is an entity that can make requests to the
{product-title} API. Typically, this represents the account of a developer or
administrator that is interacting with {product-title}.

A user can be assigned to one or more _groups_, each of which represent a
certain set of users. Groups are useful when managing authorization policies
to grant permissions to multiple users at once, for example allowing
access to objects within a project, versus granting
them to users individually.

In addition to explicitly defined groups, there are also
system groups, or _virtual groups_, that are automatically provisioned by
the cluster.

The following default virtual groups are most important:

//WHY?

[cols="2,5",options="header"]
|===

|Virtual group |Description

|`system:authenticated` |Automatically associated with all authenticated users.
|`system:authenticated:oauth` |Automatically associated with all users authenticated with an OAuth access token.
|`system:unauthenticated` |Automatically associated with all unauthenticated users.

|===

[id='api-authentication-{context}']
== API authentication
Requests to the {product-title} API are authenticated using the following
methods:

OAuth Access Tokens::
* Obtained from the {product-title} OAuth server using the
`_<master>_/oauth/authorize` and `_<master>_/oauth/token` endpoints.
* Sent as an `Authorization: Bearer...` header.
* Sent as a websocket subprotocol header in the form
`base64url.bearer.authorization.k8s.io.<base64url-encoded-token>` for websocket
requests.

X.509 Client Certificates::
* Requires a HTTPS connection to the API server.
* Verified by the API server against a trusted certificate authority bundle.
* The API server creates and distributes certificates to controllers to authenticate themselves.

Any request with an invalid access token or an invalid certificate is rejected
by the authentication layer with a 401 error.

If no access token or certificate is presented, the authentication layer assigns
the `system:anonymous` virtual user and the `system:unauthenticated` virtual
group to the request. This allows the authorization layer to determine which
requests, if any, an anonymous user is allowed to make.
